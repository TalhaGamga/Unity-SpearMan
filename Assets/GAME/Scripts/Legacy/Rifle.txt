using UnityEngine;

public class Rifle : MonoBehaviour, IRifle
{
    public IFireTriggerSystem FireSystem => fireSystem;
    public IRecoilSystem RecoilSystem => recoilSystem;
    public IAimSystem AimSystem => aimSystem;
    public IAmmoSystem AmmoSystem => ammoSystem;
    public IProjectileSystem ProjectileSystem => projectileSystem;
    public IBulletTrail BulletTrail => bulletTrail;
    public Transform FirePoint => _firePoint;
    public Transform WeaponTransform => _transform;
    public FirearmCursorDataSO FirearmCursorData => _firearmCursorData;

    [Header("Systems")]
    [SerializeField] private FireSystemSO fireSystem;
    [SerializeField] private RecoilSystemSO recoilSystem;
    [SerializeField] private AimSystemSO aimSystem;
    [SerializeField] private AmmoSystemSO ammoSystem;
    [SerializeField] private HitscanProjectileSystemSO projectileSystem;
    [SerializeField] private BulletDamageDealerSystem damageDealerSystem;

    [Header("Snapping Data")]
    [SerializeField] private Transform _transform;
    [SerializeField] private Vector3 _snapPosition;
    [SerializeField] private Quaternion _snapRotation;
    [SerializeField] private Vector3 _snapScale;
    [SerializeField] private Transform _firePoint;

    [Header("Visuality Data")]
    [SerializeField] private RifleBulletTrail bulletTrail;
    [SerializeField] private FirearmCursorDataSO _firearmCursorData;

    private void Start()
    {
        SetCombat(GetComponentInParent<ICombatManager>());
    }

    public void Equip(IEquipmentManager equipmentManager)
    {
        Transform hand = equipmentManager.Hand;
        transform.SetParent(hand);
        transform.SetLocalPositionAndRotation(_snapPosition, _snapRotation);
    }

    public void Unequip(IEquipmentManager equipmentManager)
    {
    }

    public void SetCombat(ICombatManager combatManager)
    {
    }
}